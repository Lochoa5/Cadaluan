{% load static %}

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Información de usuarios</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous" />
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" />
		<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
		<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
		<script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
		<link rel="stylesheet" href="{% static 'reparado/css/ejercicioboostrap.css' %}"/>

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />
		<script src="https://kit.fontawesome.com/7a5d053fc8.js" crossorigin="anonymous"></script>
	</head>

	<body>
		<header>
			<!--<img id="banner" src="./imagenes/bricolaje2.jpg" alt="Imagen de bienvenida"/>-->
			<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
				<!--<nav class="navbar navbar-expand-sm navbar-dark bg-dark">-->
				<div class="container-fluid">
					<a class="navbar-brand" href="{% url 'index' %}">ReparaDo!</a>

					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
						<span class="navbar-toggler-icon"></span>
					</button>

					<div class="collapse navbar-collapse" id="mynavbar">
						<ul class="navbar-nav me-auto">
							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Seguridad</a>
								<ul class="dropdown-menu">
									<li>
										<a class="dropdown-item" href="./registroUsuario.html">Registrar Usuario</a>
									</li>
									<li>
										<a class="dropdown-item" href="./informacionUsuarios.html">Visualizar Usuario</a>
									</li>
								</ul>
							</li>
							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Servicios</a>
								<ul class="dropdown-menu">
									<li><a class="dropdown-item" href="./crearServicio.html">Crear Servicio</a></li>
									<li>
										<a class="dropdown-item" href="./visualizarServicios.html">Visualizar Servicios</a>
									</li>
								</ul>
							</li>

							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Solicitudes</a>
								<ul class="dropdown-menu">
									<li>
										<a class="dropdown-item" href="solicitudServicio.html">Crear Solicitud</a>
									</li>
									<li>
										<a class="dropdown-item" href="./serviciosSolicitados.html">Visualizar Solicitud</a>
									</li>
								</ul>
							</li>

							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Pagos</a>
								<ul class="dropdown-menu">
									<li><a class="dropdown-item" href="#">Generar Factura</a></li>
									<li>
										<a class="dropdown-item" href="#">Visualizar Métodos de Pago</a>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</header>

		<main>
			<section class="container mt-3">
				<h3>Información Usuarios</h3>
				<table id="infoUsuarios" class="table user-list table-bordered table-hover">
					<thead>
						<tr>
							<th><span>Id Usuario</span></th>
							<th><span>User</span></th>
							<th><span>Created</span></th>
							<th class="text-center"><span>Status</span></th>
							<th><span>Email</span></th>
							<th>&nbsp;</th>
						</tr>
					</thead>

					<tbody>
					{% for u in data %}
						<tr>
							<td>
								{{ u.id }}
							</td>
							<td>
								<img src="{{ u.foto.url }}" alt="" />
								<a href="#" class="user-link">{{ u.nombre }} {{ u.apellido }}</a>
								<span class="user-subhead">{{ u.rol }}</span>
							</td>
							<td>2013/08/08</td>
							<td class="text-center">
								<select class="user-status">
									<option value="active">Activo</option>
									<option value="inactive">Inactivo</option>
									<option value="pending">Pendiente</option>
									<!-- Agrega más opciones de estados aquí -->
								</select>
							</td>

							<td><a href="#">{{ u.email }}</a></td>
							<td>
								<button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#visualizarUsuario">
									<i class="bi bi-eye"></i>
								</button>
								<button type="button" class="btn btn-light" data-bs-toggle="modal" data-bs-target="#editarUsuario">
									<i class="bi bi-pencil-square"></i>
								</button>
								<button type="button" class="btn btn-info">
									<i class="bi bi-toggle-off"></i>
								</button>
								<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#eliminarUsuario">
									<i class="bi bi-trash"></i>
								</button>
							</td>
						</tr>
					{% endfor %}
					</tbody>
				</table>
			</section>
		</main>

		<!-- Modal para visualizar usuario -->
		<div class="modal fade" id="visualizarUsuario" tabindex="-1" aria-labelledby="visualizarUsuarioLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="visualizarUsuarioLabel">Detalles del Usuario</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="text-center">
							<img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="Usuario" class="img-thumbnail" />
						</div>
						<h5 class="text-center">Isabel Torres</h5>
						<p class="text-center">Admin</p>
						<table class="table">
							<tr>
								<td>Fecha de Registro</td>
								<td>2013/08/08</td>
							</tr>
							<tr>
								<td>Estado</td>
								<td><span class="badge bg-secondary">Inactive</span></td>
							</tr>
							<tr>
								<td>Correo</td>
								<td><a href="mailto:correo@correo.com">correo@correo.com</a></td>
							</tr>
						</table>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Modal para editar usuario -->
		<div class="modal fade" id="editarUsuario" tabindex="-1" aria-labelledby="editarUsuarioLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="editarUsuarioLabel">Editar Usuario</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<form>
							<div class="mb-3">
								<label for="nombre" class="form-label">Nombre:</label>
								<input type="text" class="form-control" id="nombre" value="Isabel Torres" />
							</div>
							<div class="mb-3">
								<label for="rol" class="form-label">Rol:</label>
								<input type="text" class="form-control" id="rol" value="Admin" />
							</div>
							<div class="mb-3">
								<label for="fechaRegistro" class="form-label">Fecha de Registro:</label>
								<input type="text" class="form-control" id="fechaRegistro" value="2013/08/08" />
							</div>
							<div class="mb-3">
								<label for="estado" class="form-label">Estado:</label>
								<select class="form-select" id="estado">
									<option value="Active">Activo</option>
									<option value="Inactive" selected>Inactivo</option>
								</select>
							</div>
							<div class="mb-3">
								<label for="correo" class="form-label">Correo:</label>
								<input type="email" class="form-control" id="correo" value="correo@correo.com" />
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
						<button type="button" class="btn btn-primary">Guardar Cambios</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Modal para eliminar usuario -->
		<div class="modal fade" id="eliminarUsuario" tabindex="-1" aria-labelledby="eliminarUsuarioLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="eliminarUsuarioLabel">Confirmar Eliminación</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<p>¿Está seguro de que desea eliminar a Isabel Torres?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
						<button type="button" class="btn btn-danger">Confirmar Eliminación</button>
					</div>
				</div>
			</div>
		</div>

		{% include 'reparado/layouts/footer1.html' %}

		<script>
			$(document).ready(function () {
			  $("#infoUsuarios").DataTable({
			    language: {
			      lengthMenu: "Mostrando _MENU_ registros por página",
			      zeroRecords: "No se encontro nada - Lo sentimos",
			      info: "Mostrando página _PAGE_ de _PAGES_",
			      infoEmpty: "No hay registros existentes",
			      infoFiltered: "(filtrado desde _MAX_ total records)",
			      paginate: {
			        first: "Primero",
			        last: "Último",
			        next: "Próximo",
			        previous: "Anterior",
			      },
			      search: "Buscar:",
			    },
			  });
			});
		</script>
		<script>
			// Función para manejar el cambio en el menú desplegable
			function handleStatusChange() {
				var select = document.querySelector(".user-status");
				var selectedStatus = select.value;
				var element = document.querySelector(".user-status"); // Elemento que cambiará de color

				// Define los colores para cada estado
				var colors = {
					active: "green",
					inactive: "red",
					pending: "orange",
					// Agrega más colores según tus necesidades
				};

				// Cambia el color del elemento según el estado seleccionado
				if (colors[selectedStatus]) {
					element.style.color = colors[selectedStatus];
				}
			}

			// Asigna el manejador de eventos al menú desplegable
			var select = document.querySelector(".user-status");
			select.addEventListener("change", handleStatusChange);
		</script>
	</body>
</html>
